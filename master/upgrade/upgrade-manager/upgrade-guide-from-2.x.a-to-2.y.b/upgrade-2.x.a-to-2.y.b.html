

<!DOCTYPE html>
<html class="no-js" lang="en">
    
    

    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width initial-scale=1" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>
             Scylla Manager Upgrade - Scylla Manager 2.x.a to 2.y.b | Scylla Docs 
        </title>
        <meta name="description" content="Scylla is an Apache Cassandra-compatible NoSQL data store that can handle 1 million transactions per second on a single server." />
        <link rel="icon" href="../../../_static/img/favicon.ico" type="image/x-icon" />
        <link rel="icon" href="../../../_static/img/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" href="../../../_static/img/favicon-228x228.png" sizes="192x192" />
        <link rel="apple-touch-icon" href="../../../_static/img/favicon-228x228.png" />
        <meta name="msapplication-TileImage" href="../../../_static/img/favicon-228x228.png" />

        
            
            
        

        
            
            <link rel="canonical" href="https://docs.scylladb.com/stable/upgrade/upgrade-manager/upgrade-guide-from-2.x.a-to-2.y.b/upgrade-2.x.a-to-2.y.b.html"/>
        

        <link rel="author" href="mailto:info@scylladb.com" />

        
            
        <!-- increase expertrec loading priority-->
        <link rel="dns-prefetch" href="https://cse.expertrec.com">

        <!-- increase font loading priority -->
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link rel="preload" as="style"
            href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400&display=swap" />

        <!-- async CSS -->
        <link rel="stylesheet" media="print" onload="this.onload=null;this.removeAttribute('media');"
            href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400&display=swap" />

        <!-- no-JS fallback -->
        <noscript>
            <link rel="stylesheet"
                href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400&display=swap" />
        </noscript>
        
            
                <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
            
        
            
                <link rel="stylesheet" type="text/css" href="../../../_static/css/main.css" />
            
        
            
                <link rel="stylesheet" type="text/css" href="../../../_static/sphinx_collapse.css" />
            
        
            
                <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
            
        
    
        
        
            

        <script type="text/javascript" id="documentation_options" data-url_root="../../../"
            src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/js/runtime.bundle.js"></script>
        <script type="text/javascript" src="../../../_static/js/main.bundle.js"></script>
        
            
                <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
            
        
            
        
            
                <script src="../../../_static/underscore.js"></script>
            
        
            
                <script src="../../../_static/doctools.js"></script>
            
        
            
                <script src="../../../_static/clipboard.min.js"></script>
            
        
            
                <script src="../../../_static/copybutton.js"></script>
            
        
    
            <!-- Google Tag Manager -->
<script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({
            "gtm.start": new Date().getTime(),
            event: "gtm.js"
        });
        var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s),
        dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, "script", "dataLayer", "GTM-T8P2JP");
</script>
<!-- End Google Tag Manager -->

<!-- Expertrec -->
<script>
    var id = "e2077224-9ccf-11e9-a0c9-0242ac130002";
    var ci_search = document.createElement("script");
    ci_search.type = "text/javascript";
    ci_search.async = true;
    ci_search.src = "https://cse.expertrec.com/api/js/ci_common.js?id=" + id;
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(ci_search, s);
</script>
<!-- End Expertrec -->
        
        <!-- Font Awesome -->
        <script src="https://kit.fontawesome.com/b1870adf6a.js" crossorigin="anonymous"></script>
        <!-- End Font Awesome -->
    </head>

    <body>
        
        <header class="header">
    <div class="header-logo">
        <a class="header-logo__img" href="https://scylladb.com/">
            <img src="../../../_static/img/logo-docs.svg" alt="Scylla Documentation Logo" />
        </a>
        <span class="header-logo__bar"></span>
        <a class="header-logo__text" href="https://docs.scylladb.com/">
            Documentation
        </a>
    </div>
    <div class="header-navigation">
        <ul class="dropdown menu scylla-dropdown scylla-dropdown--header" data-dropdown-menu>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Server
                    <i class="chevron scylla-icon scylla-icon--triangle-down"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--about-us"></i>
                            Scylla Open Source
                        </a>
                    </li>
                    <li>
                        <a href="https://docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--enterprise"></i>Scylla Enterprise
                        </a>
                    </li>
                    <li>
                        <a href="https://scylla.docs.scylladb.com/stable/alternator/alternator.html">
                            <i class="scylla-icon scylla-icon--overview"></i>
                            Scylla Alternator
                        </a>
                    </li>
                </ul>
            </li>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Cloud <i
                    class="chevron scylla-icon scylla-icon--triangle-down"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://cloud.scylladb.com/">
                            <i class="scylla-icon scylla-icon--cloud"></i>Scylla Cloud</a>
                    </li>
                    <li>
                        <a href="https://docs.scylladb.com/scylla-cloud/">
                            <i class="scylla-icon scylla-icon--cloud-docs"></i>Scylla Cloud
                            Docs</a>
                    </li>
                </ul>
            </li>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Tools <i
                    class="chevron scylla-icon scylla-icon--triangle-down"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://manager.docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--manager"></i>Scylla Manager</a>
                    </li>
                    <li>
                        <a href="https://monitoring.docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--monitoring"></i>Scylla
                            Monitoring Stack</a>
                    </li>
                    <li>
                        <a href="https://operator.docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--operator"></i>Scylla Operator
                        </a>
                    </li>
                </ul>
            </li>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Drivers <i
                    class="chevron scylla-icon scylla-icon--triangle-down"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://docs.scylladb.com/using-scylla/drivers/cql-drivers/">
                            <i class="scylla-icon scylla-icon--nsql-guides"></i>CQL Drivers
                        </a>
                    </li>
                    <li>
                        <a href="https://docs.scylladb.com/using-scylla/drivers/dynamo-drivers/">
                            <i class="scylla-icon scylla-icon--overview"></i>DynamoDB Drivers
                        </a>
                    </li>
                </ul>
            </li>
        </ul>
        <div class="header-button">
            <a href="https://www.scylladb.com/download/" class="button">Download</a>
        </div>
    </div>
    <div class="header-search-box">
        <div class="search-box">
            <ci-search></ci-search>
        </div>
    </div>
    <div class="side-nav-toggle" data-toggle="side-nav">
    <div class="side-nav-toggle__button">
        <img src="../../../_static/img/menu.svg" alt="Menu" />
    </div>
</div>
</header>
        <section
            class="layout  layout--sidebar layout--has-secondary-sidebar ">
            <div class="content large-order-2">
                
                    
                
                
                    <div class="pre-content">
                        <div class="breadcrumbs">
    <span class="bread__item">
        <a href="../../../index.html"
            class="bread__highlight">
            <i class="fas fa-home"></i> ScyllaDB Open Source
        </a>
    </span>
    
        <span class="bread__item">
            <a href="../../../operating-scylla/index.html">
                Scylla for Administrators
            </a>
        </span>
    
        <span class="bread__item">
            <a href="../../../operating-scylla/manager/index.html">
                Scylla Manager
            </a>
        </span>
    
        <span class="bread__item">
            <a href="../index.html">
                Upgrade Scylla Manager
            </a>
        </span>
    
        <span class="bread__item">
            <a href="index.html">
                Upgrade Scylla Manager 2.x.a to 2.y.b
            </a>
        </span>
    
    <span class="bread__item bread__item--last">Scylla Manager Upgrade - Scylla Manager 2.x.a to 2.y.b</span>
</div>
                    </div>
                
                <section id="scylla-manager-upgrade-scylla-manager-2-x-a-to-2-y-b">
<h1>Scylla Manager Upgrade - Scylla Manager 2.x.a to 2.y.b<a class="headerlink" href="#scylla-manager-upgrade-scylla-manager-2-x-a-to-2-y-b" title="Permalink to this headline">¶</a></h1>
<p>This document describes upgrade guide between two following <em>Minor</em> or <em>Patch</em> releases of Scylla Manager 2.x.y</p>
<div class="toctree-wrapper compound">
</div>
<section id="applicable-versions">
<h2>Applicable versions<a class="headerlink" href="#applicable-versions" title="Permalink to this headline">¶</a></h2>
<p>This guide covers upgrading Scylla Manager version 2.x.a to version 2.y.b, on the following platforms:</p>
<ul class="simple">
<li><p>Red Hat Enterprise Linux, version 7</p></li>
<li><p>CentOS, version 7</p></li>
<li><p>Debian, version 9</p></li>
<li><p>Ubuntu, versions 16.04, 18.04</p></li>
</ul>
</section>
<section id="upgrade-procedure">
<h2>Upgrade Procedure<a class="headerlink" href="#upgrade-procedure" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In Scylla Manager 2.x.a new component called Scylla Manager Agent is introduced which is running on each scylla node in the cluster as a sidecar. Upgrading this component means commands have to be executed for each node separately.</p>
</div>
<p>Upgrade procedure for the Scylla Manager includes upgrade of three components server, client, and the agent. Entire cluster shutdown is NOT needed. Scylla will be running while the manager components are upgraded. Overview of the required steps:</p>
<ul class="simple">
<li><p>Stop all Scylla Manager tasks (or wait for them to finish)</p></li>
<li><p>Stop the Scylla Manager Server 2.x.a</p></li>
<li><p>Stop the Scylla Manager Agent 2.x.a on all nodes</p></li>
<li><p>Upgrade the Scylla Manager Server and Client to 2.y.b</p></li>
<li><p>Upgrade the Scylla Manager Agent to 2.y.b on all nodes</p></li>
<li><p>Run <cite>scyllamgr_agent_setup</cite> script on all nodes</p></li>
<li><p>Reconcile configuration files</p></li>
<li><p>Start the Scylla Manager Agent 2.y.b on all nodes</p></li>
<li><p>Start the Scylla Manager Server 2.y.b</p></li>
<li><p>Validate status of the cluster</p></li>
</ul>
</section>
<section id="upgrade-steps">
<h2>Upgrade steps<a class="headerlink" href="#upgrade-steps" title="Permalink to this headline">¶</a></h2>
<section id="stop-all-scylla-manager-tasks-or-wait-for-them-to-finish">
<h3>Stop all Scylla Manager tasks (or wait for them to finish)<a class="headerlink" href="#stop-all-scylla-manager-tasks-or-wait-for-them-to-finish" title="Permalink to this headline">¶</a></h3>
<p><strong>On the Manager Server</strong> check current status of the manager tasks:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sctool task list -c &lt;cluster&gt;
</pre></div>
</div>
<p>None of the listed tasks should have status in RUNNING.</p>
</section>
<section id="stop-the-scylla-manager-server-2-x-a">
<h3>Stop the Scylla Manager Server 2.x.a<a class="headerlink" href="#stop-the-scylla-manager-server-2-x-a" title="Permalink to this headline">¶</a></h3>
<p><strong>On the Manager Server</strong> instruct Systemd to stop the server process:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo systemctl stop scylla-manager
</pre></div>
</div>
<p>Ensure that it is stopped with:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo systemctl status scylla-manager
</pre></div>
</div>
<p>It should have a status of <em>“Active: inactive (dead)”</em>.</p>
</section>
<section id="stop-the-scylla-manager-agent-2-x-a-on-all-nodes">
<h3>Stop the Scylla Manager Agent 2.x.a on all nodes<a class="headerlink" href="#stop-the-scylla-manager-agent-2-x-a-on-all-nodes" title="Permalink to this headline">¶</a></h3>
<p><strong>On each scylla node</strong> in the cluster run:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo systemctl stop scylla-manager-agent
</pre></div>
</div>
<p>Ensure that it is stopped with:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo systemctl status scylla-manager-agent
</pre></div>
</div>
<p>It should have a status of <em>“Active: inactive (dead)”</em>.</p>
</section>
<section id="upgrade-the-scylla-manager-server-and-client-to-2-y-b">
<h3>Upgrade the Scylla Manager Server and Client to 2.y.b<a class="headerlink" href="#upgrade-the-scylla-manager-server-and-client-to-2-y-b" title="Permalink to this headline">¶</a></h3>
<p><strong>Before you Begin</strong></p>
<p>Confirm that the settings for <code class="docutils literal notranslate"><span class="pre">scylla-manager.repo</span></code> are correct.</p>
<p><strong>On the Manager Server</strong> display the contents of the scylla-manager.repo and confirm the version displayed is the version you want to upgrade to. This example uses Scylla Manager 2.1, but your display should show the repo you have installed.</p>
<p>CentOS, Red Hat:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>cat /etc/yum.repos.d/scylla-manager.repo

<span class="o">[</span>scylla-manager-2.1<span class="o">]</span> <span class="nv">name</span><span class="o">=</span>Scylla Manager <span class="k">for</span> Centos - <span class="nv">$basearch</span> <span class="nv">baseurl</span><span class="o">=</span>http://downloads.scylladb.com/downloads/scylla-manager/rpm/centos/scylladb-manager-2.1/<span class="nv">$basearch</span>/ <span class="nv">enabled</span><span class="o">=</span><span class="m">1</span> <span class="nv">gpgcheck</span><span class="o">=</span><span class="m">0</span>
</pre></div>
</div>
<p>Debian, Ubuntu:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>cat /etc/apt/sources.list/scylla-manager.repo

<span class="o">[</span>scylla-manager-2.1<span class="o">]</span> <span class="nv">name</span><span class="o">=</span>Scylla Manager <span class="k">for</span> Centos - <span class="nv">$basearch</span> <span class="nv">baseurl</span><span class="o">=</span>http://downloads.scylladb.com/downloads/scylla-manager/rpm/centos/scylladb-manager-2.1/<span class="nv">$basearch</span>/ <span class="nv">enabled</span><span class="o">=</span><span class="m">1</span> <span class="nv">gpgcheck</span><span class="o">=</span><span class="m">0</span>
</pre></div>
</div>
<p><strong>On the Manager Server</strong> instruct package manager to update server and the client:</p>
<p>CentOS, Red Hat:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo yum update scylla-manager-server scylla-manager-client -y
</pre></div>
</div>
<p>Debian, Ubuntu:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo apt-get update
sudo apt-get install scylla-manager-server scylla-manager-client -y
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When using apt-get, if a previous version of the Scylla Manager package had a modified configuration file, you will be asked what to do with this file during the installation process. In order to keep both files for reconciliation (covered later in the procedure), select the “keep your currently-installed version” option when prompted.</p>
</div>
</section>
<section id="upgrade-the-scylla-manager-agent-to-2-y-b-on-all-nodes">
<h3>Upgrade the Scylla Manager Agent to 2.y.b on all nodes<a class="headerlink" href="#upgrade-the-scylla-manager-agent-to-2-y-b-on-all-nodes" title="Permalink to this headline">¶</a></h3>
<p><strong>On each scylla node</strong> instruct package manager to update the agent:</p>
<p>CentOS, Red Hat:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo yum update scylla-manager-agent -y
</pre></div>
</div>
<p>Debian, Ubuntu:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo apt-get update
sudo apt-get install scylla-manager-agent -y
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>With apt-get, if a previous version of the package had a modified configuration file, you will be asked during installation what to do with it. Please select “keep your currently-installed version” option to keep both previous and new default configuration file for later reconciliation.</p>
</div>
</section>
<section id="run-scyllamgr-agent-setup-script-on-all-nodes">
<h3>Run <cite>scyllamgr_agent_setup</cite> script on all nodes<a class="headerlink" href="#run-scyllamgr-agent-setup-script-on-all-nodes" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Script mentioned in this section is added in version 2.0.2 so it won’t be available for earlier versions.</p>
</div>
<p>This step requires sudo rights:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ sudo scyllamgr_agent_setup
Do you want to create scylla-helper.slice <span class="k">if</span> it does not exist?
Yes - limit Scylla Manager Agent and other helper programs memory. No - skip this step.
<span class="o">[</span>YES/no<span class="o">]</span> YES
Do you want the Scylla Manager Agent service to automatically start when the node boots?
Yes - automatically start Scylla Manager Agent when the node boots. No - skip this step.
<span class="o">[</span>YES/no<span class="o">]</span> YES
</pre></div>
</div>
<p>First step relates to limiting resources that are available to the agent and second
instructs systemd to run agent on node restart.</p>
</section>
<section id="reconcile-configuration-files">
<h3>Reconcile configuration files<a class="headerlink" href="#reconcile-configuration-files" title="Permalink to this headline">¶</a></h3>
<p>Upgrades can create changes to the structure and values of the default yaml configuration file. If the previous version’s configuration file was modified with custom values, this could result in a conflict. The upgrade procedure can’t resolve this without help from an administrator. If you followed instructions from the upgrade packages sections of this document, and you elected to save both the new and old configuration files, the new version of the configuration file is saved in the same directory as the old one with an added extension suffix for both server and agent. These files are stored in the <cite>/etc/scylla-manager</cite> directory.</p>
<p>On a CentOS configuration, a conflict looks like:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1"># On the Scylla Manager node</span>
/etc/scylla-manager/scylla-manager.yaml <span class="c1"># old file containing custom values</span>
/etc/scylla-manager/scylla-manager.yaml.rpmnew <span class="c1"># new default file from new version</span>
<span class="c1"># On all Scylla nodes</span>
/etc/scylla-manager-agent/scylla-manager-agent.yaml <span class="c1"># old file containing custom values</span>
/etc/scylla-manager-agent/scylla-manager-agent.yaml.rpmnew <span class="c1"># new default file from new version</span>
</pre></div>
</div>
<p>On an Ubuntu configuration, a conflict looks like:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1"># On the Scylla Manager node</span>
/etc/scylla-manager/scylla-manager.yaml <span class="c1"># old file containing custom values</span>
/etc/scylla-manager/scylla-manager.yaml.dpkg-dist <span class="c1"># new default file from new version</span>
<span class="c1"># On all Scylla nodes</span>
/etc/scylla-manager-agent/scylla-manager-agent.yaml <span class="c1"># old file containing custom values</span>
/etc/scylla-manager-agent/scylla-manager-agent.yaml.dpkg-dist <span class="c1"># new default file from new version</span>
</pre></div>
</div>
<p>It is required to manually inspect both files and reconcile old values with the new configuration. Remember to carry over any custom values like database credentials, backup, repair, and any other configuration. This can be done by manually updating values in the new config file and then renaming files:</p>
<p>For CentOS:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1"># On the Scylla Manager node</span>
<span class="nb">cd</span> /etc/scylla-manager/
mv scylla-manager.yaml scylla-manager.yaml.old  <span class="c1">#renames the old config file as old</span>
mv scylla-manager.yaml.rpmnew scylla-manager.yaml
<span class="c1"># On all Scylla nodes</span>
<span class="nb">cd</span> /etc/scylla-manager-agent/
mv scylla-manager-agent.yaml scylla-manager-agent.yaml.old
mv scylla-manager-agent.yaml.rpmnew scylla-manager-agent.yaml
</pre></div>
</div>
<p>For Ubuntu:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1"># On the Scylla Manager node</span>
<span class="nb">cd</span> /etc/scylla-manager/
mv scylla-manager.yaml scylla-manager.yaml.old
mv scylla-manager.yaml.dpkg-dist scylla-manager.yaml
<span class="c1"># On all Scylla nodes</span>
<span class="nb">cd</span> /etc/scylla-manager-agent/
mv scylla-manager-agent.yaml scylla-manager-agent.yaml.old
mv scylla-manager-agent.yaml.dpkg-dist scylla-manager-agent.yaml
</pre></div>
</div>
<p><strong>Guide to important configuration changes across versions:</strong></p>
<p>Scylla Manager 2.2.x</p>
<ul class="simple">
<li><dl class="simple">
<dt>Default ports changed. They are placed into a lower port bracket because higher bracket is reserved by the OS for incoming connections and this is to avoid potential conflicts.</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">http</span></code> old port was <code class="docutils literal notranslate"><span class="pre">56080</span></code> new port is <code class="docutils literal notranslate"><span class="pre">5080</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">https</span></code> old port was <code class="docutils literal notranslate"><span class="pre">56443</span></code> new port is <code class="docutils literal notranslate"><span class="pre">5443</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">prometheus</span></code> old port was <code class="docutils literal notranslate"><span class="pre">56090</span></code> new port is <code class="docutils literal notranslate"><span class="pre">5090</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">debug</span></code> old port waas <code class="docutils literal notranslate"><span class="pre">56112</span></code> new port is <code class="docutils literal notranslate"><span class="pre">5112</span></code></p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Repair changes:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">poll_interval</span></code> was changed from <code class="docutils literal notranslate"><span class="pre">200ms</span></code> to <code class="docutils literal notranslate"><span class="pre">50ms</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">segments_per_repair</span></code>, <code class="docutils literal notranslate"><span class="pre">shard_parallel_max</span></code>, <code class="docutils literal notranslate"><span class="pre">shard_failed_segments_max</span></code>, and <code class="docutils literal notranslate"><span class="pre">error_backoff</span></code> were removed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">graceful_stop_timeout</span></code> and <code class="docutils literal notranslate"><span class="pre">force_repair_type</span></code> were added.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>Scylla Manager Agent 2.2.x</p>
<ul class="simple">
<li><dl class="simple">
<dt>Default ports changed. They are placed into a lower port bracket because higher bracket is reserved by the OS for incoming connections and this is to avoid potential conflicts.</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">prometheus</span></code> old port was <code class="docutils literal notranslate"><span class="pre">56090</span></code> new port is <code class="docutils literal notranslate"><span class="pre">5090</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">debug</span></code> old port waas <code class="docutils literal notranslate"><span class="pre">56112</span></code> new port is <code class="docutils literal notranslate"><span class="pre">5112</span></code></p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="start-the-scylla-manager-agent-2-y-b-on-all-nodes">
<h3>Start the Scylla Manager Agent 2.y.b on all nodes<a class="headerlink" href="#start-the-scylla-manager-agent-2-y-b-on-all-nodes" title="Permalink to this headline">¶</a></h3>
<p><strong>On each scylla node</strong> instruct Systemd to start the agent process:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo systemctl start scylla-manager-agent
</pre></div>
</div>
<p>Ensure that it is running with:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo systemctl status scylla-manager-agent
</pre></div>
</div>
<p>It should have a status of <em>“Active: active (running)”</em>.</p>
</section>
<section id="start-the-scylla-manager-server-2-y-b">
<h3>Start the Scylla Manager Server 2.y.b<a class="headerlink" href="#start-the-scylla-manager-server-2-y-b" title="Permalink to this headline">¶</a></h3>
<p><strong>On the Manager Server</strong> instruct Systemd to start the server process:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo systemctl daemon-reload
sudo systemctl start scylla-manager
</pre></div>
</div>
<p>Ensure that it is started with:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo systemctl status scylla-manager
</pre></div>
</div>
<p>It should have a status of <em>“Active: active (running)”</em>.</p>
</section>
<section id="validate-status-of-the-cluster">
<h3>Validate status of the cluster<a class="headerlink" href="#validate-status-of-the-cluster" title="Permalink to this headline">¶</a></h3>
<p><strong>On the Manager Server</strong> check the version of the client and the server:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sctool version
Client version: <span class="m">2</span>.y.b-0.20200123.7cf18f6b
Server version: <span class="m">2</span>.y.b-0.20200123.7cf18f6b
</pre></div>
</div>
<p>Check that cluster is up:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sctool status -c &lt;cluster&gt;
</pre></div>
</div>
<p>All running nodes should be up.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In <strong>Scylla Manager 2.2</strong> the meaning of repair command’s <code class="docutils literal notranslate"><span class="pre">--intensity</span></code> flag was changed. After starting the upgraded server, all previously scheduled repairs will remain with the original value of <code class="docutils literal notranslate"><span class="pre">--intensity</span></code> but that value will be interpreted differently. This parameter is now broken into two new components:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--intensity</span></code> which now affects the number of repaired segments in a single repair request to the cluster. By default value (0) scylla manager will try to determine the maximum segments possible based on cluster setup.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--parallel</span></code> which now affects how many repairs will be requested in parallel (given that only nodes that are not busy with the repair can be repaired in parallel). By default value (0) maximum possible parallelism will be applied.</p></li>
</ul>
<p>Based on this breakdown you can update current repair tasks to achieve previous result. Update can be done with:</p>
<blockquote>
<div><p>sctool repair update –intensity &lt;value&gt; –parallel &lt;value&gt; &lt;type/task-id&gt;</p>
</div></blockquote>
</div>
</section>
</section>
<section id="rollback-procedure">
<h2>Rollback Procedure<a class="headerlink" href="#rollback-procedure" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Rolling back to 2.x.a is not recommended because 2.y.b contains bug fixes and performance optimizations so you will be going back to a lesser version. This should be only used as a last resort.</p>
</div>
<p>Rollback procedure contains the same steps as upgrade but with downgrading the components to older version:</p>
<ul class="simple">
<li><p>Stop all Scylla Manager tasks (or wait for them to finish)</p></li>
<li><p>Stop the Scylla Manager Server 2.y.b</p></li>
<li><p>Stop the Scylla Manager Agent 2.y.b on all nodes</p></li>
<li><p>Downgrade the Scylla Manager Server and Client to 2.x.a</p></li>
<li><p>Downgrade the Scylla Manager Agent to 2.x.a on all nodes</p></li>
<li><p>Bring back old configuration (if there was conflict)</p></li>
<li><p>Start the Scylla Manager Agent 2.x.a on all nodes</p></li>
<li><p>Start the Scylla Manager Server 2.x.a</p></li>
<li><p>Validate status of the cluster</p></li>
</ul>
</section>
<section id="rollback-steps">
<h2>Rollback steps<a class="headerlink" href="#rollback-steps" title="Permalink to this headline">¶</a></h2>
<section id="id1">
<h3>Stop all Scylla Manager tasks (or wait for them to finish)<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p><strong>On the Manager Server</strong> check current status of the manager tasks:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sctool task list -c &lt;cluster&gt;
</pre></div>
</div>
<p>None of the listed tasks should have status in RUNNING.</p>
</section>
<section id="stop-the-scylla-manager-server-2-y-b">
<h3>Stop the Scylla Manager Server 2.y.b<a class="headerlink" href="#stop-the-scylla-manager-server-2-y-b" title="Permalink to this headline">¶</a></h3>
<p><strong>On the Manager Server</strong> instruct Systemd to stop the server process:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo systemctl stop scylla-manager
</pre></div>
</div>
<p>Ensure that it is stopped with:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo systemctl status scylla-manager
</pre></div>
</div>
<p>It should have a status of <em>“Active: inactive (dead)”</em>.</p>
</section>
<section id="stop-the-scylla-manager-agent-2-y-b-on-all-nodes">
<h3>Stop the Scylla Manager Agent 2.y.b on all nodes<a class="headerlink" href="#stop-the-scylla-manager-agent-2-y-b-on-all-nodes" title="Permalink to this headline">¶</a></h3>
<p><strong>On each scylla node</strong> in the cluster run:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo systemctl stop scylla-manager-agent
</pre></div>
</div>
<p>Ensure that it is stopped with:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo systemctl status scylla-manager-agent
</pre></div>
</div>
<p>It should have a status of <em>“Active: inactive (dead)”</em>.</p>
</section>
<section id="downgrade-the-scylla-manager-server-and-client-to-2-x-a">
<h3>Downgrade the Scylla Manager Server and Client to 2.x.a<a class="headerlink" href="#downgrade-the-scylla-manager-server-and-client-to-2-x-a" title="Permalink to this headline">¶</a></h3>
<p><strong>On the Manager Server</strong> instruct package manager to downgrade server and the client:</p>
<p>CentOS, Red Hat:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo yum downgrade scylla-manager-server-2.x.a* scylla-manager-client-2.x.a* -y
</pre></div>
</div>
<p>Debian, Ubuntu:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo apt-get install scylla-manager-server<span class="o">=</span><span class="m">2</span>.x.a scylla-manager-client<span class="o">=</span><span class="m">2</span>.x.a -y
</pre></div>
</div>
</section>
<section id="downgrade-the-scylla-manager-agent-to-2-x-a-on-all-nodes">
<h3>Downgrade the Scylla Manager Agent to 2.x.a on all nodes<a class="headerlink" href="#downgrade-the-scylla-manager-agent-to-2-x-a-on-all-nodes" title="Permalink to this headline">¶</a></h3>
<p><strong>On each scylla node</strong> instruct package manager to downgrade the agent:</p>
<p>CentOS, Red Hat:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo yum downgrade scylla-manager-agent-2.x.a* -y
</pre></div>
</div>
<p>Debian, Ubuntu:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo apt-get install scylla-manager-agent<span class="o">=</span><span class="m">2</span>.x.a -y
</pre></div>
</div>
</section>
<section id="revert-to-the-old-configuration">
<h3>Revert to the old configuration<a class="headerlink" href="#revert-to-the-old-configuration" title="Permalink to this headline">¶</a></h3>
<p>If you followed instructions from the Upgrade Steps section and you had configuration conflict when upgrading, then listing the configuration directory should give you both new and old configuration:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>/etc/scylla-manager/scylla-manager.yaml <span class="c1"># New version that you want to disable</span>
/etc/scylla-manager/scylla-manager.yaml.old <span class="c1"># Previous version that you want to rollback</span>
</pre></div>
</div>
<p>To restore the old configuration:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> /etc/scylla-manager/
mv scylla-manager.yaml scylla-manager.yaml.new
mv scylla-manager.yaml.old scylla-manager.yaml
</pre></div>
</div>
<p>The procedure is the same for the Scylla Manager Agent (on all nodes):</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> /etc/scylla-manager-agent/
mv scylla-manager-agent.yaml scylla-manager-agent.yaml.new
mv scylla-manager-agent.yaml.old scylla-manager-agent.yaml
</pre></div>
</div>
</section>
<section id="start-the-scylla-manager-agent-2-x-a-on-all-nodes">
<h3>Start the Scylla Manager Agent 2.x.a on all nodes<a class="headerlink" href="#start-the-scylla-manager-agent-2-x-a-on-all-nodes" title="Permalink to this headline">¶</a></h3>
<p>On all nodes instruct Systemd to start the agent process:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo systemctl start scylla-manager-agent
</pre></div>
</div>
<p>Ensure that it is running with:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo systemctl status scylla-manager-agent
</pre></div>
</div>
<p>It should have a status of <em>“Active: active (running)”</em>.</p>
</section>
<section id="start-the-scylla-manager-server-2-x-a">
<h3>Start the Scylla Manager Server 2.x.a<a class="headerlink" href="#start-the-scylla-manager-server-2-x-a" title="Permalink to this headline">¶</a></h3>
<p><strong>On the Manager Server</strong> instruct Systemd to start the server process:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo systemctl stop scylla-manager
</pre></div>
</div>
<p>Ensure that it is stopped with:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo systemctl status scylla-manager
</pre></div>
</div>
<p>It should have a status of <em>“Active: active (running)”</em>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In <strong>Scylla Manager 2.2</strong> the meaning of repair command’s <code class="docutils literal notranslate"><span class="pre">--intensity</span></code> flag was changed. If you want to rollback changes that were broken down to <code class="docutils literal notranslate"><span class="pre">--intensity</span></code> and <code class="docutils literal notranslate"><span class="pre">--parallel</span></code> you would need to remove or disable task in question and create new with correct values.</p>
<p>For example:</p>
<blockquote>
<div><p>sctool task update –enable false &lt;type/task_id&gt;
sctool repair [repair parameters]</p>
</div></blockquote>
</div>
</section>
<section id="id2">
<h3>Validate status of the cluster<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p><strong>On the Manager Server</strong> check the version of the client and the server:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sctool version
Client version: <span class="m">2</span>.x.a
Server version: <span class="m">2</span>.x.a
</pre></div>
</div>
<p>Check that cluster is up:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sctool status -c &lt;cluster&gt;
</pre></div>
</div>
<p>All running nodes should be up.</p>
</section>
</section>
</section>

                
                    <div class="post-content"><div class="content-navigation">
    <div class="navigation navigation--prev">
        
            <a class="navigation__link" href="index.html">
                <button class="navigation__button">
                    <i class="scylla-icon scylla-icon--chevron-left"></i>
                </button>
                <div class="navigation__title">
                    <span class="colored">PREVIOUS</span> <br />Upgrade Scylla Manager 2.x.a to 2.y.b
                </div>
            </a>
        
    </div>
    <div class="navigation navigation--next">
        
            <a class="navigation__link" href="upgrade-row-level-repair.html">
                <div class="navigation__title">
                    <span class="colored">NEXT</span> <br />Fix for Row-level Repairs
                </div>
                <button class="navigation__button">
                    <i class="scylla-icon scylla-icon--chevron-right"></i>
                </button>
            </a>
        
    </div>
</div></div>
                
            </div>
            <div class="sidebar-left  large-order-1">
                
                    
                        <div id="side-nav" class="side-nav custom-scroll-bar" data-closable data-toggler=".show">
    <button class="collapsible-button">
        <i class="scylla-icon scylla-icon--chevron-left"></i>
    </button>
    <div class="side-nav-content">
        <div class="side-nav__search">
            <div class="search-box">
                <ci-search></ci-search>
            </div>
        </div>
        <div class="side-nav__versions"></div>
        <div class="side-nav__content">
            <ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../getting-started/index.html">Getting Started</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../getting-started/install-scylla/index.html">Install Scylla</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../getting-started/install-scylla/scylla-web-installer.html">ScyllaDB Web Installer for Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../getting-started/install-scylla/unified-installer.html">Scylla Unified Installer (relocatable executable)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../getting-started/install-scylla/air-gapped-install.html">Air-gapped Server Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../getting-started/install-scylla/rpm-info.html">What is in each RPM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../getting-started/install-scylla/disable-housekeeping.html">Scylla Housekeeping and how to disable it</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../getting-started/install-scylla/dev-mod.html">Scylla Developer Mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../getting-started/install-scylla/config-commands.html">Scylla Configuration Reference</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../getting-started/configure.html">Configure Scylla</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../getting-started/requirements.html">Scylla Requirements</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../getting-started/system-requirements.html">System Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../getting-started/os-support.html">OS Support by Platform and Version</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../getting-started/scylla-in-a-shared-environment.html">Scylla in a Shared Environment</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../using-scylla/drivers/index.html">Scylla Drivers</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label for="toctree-checkbox-4"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../using-scylla/drivers/cql-drivers/index.html">Scylla CQL Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../using-scylla/drivers/dynamo-drivers/index.html">Scylla DynamoDB Drivers</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../using-scylla/migrate-scylla.html">Migrate to Scylla</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label for="toctree-checkbox-5"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../operating-scylla/procedures/cassandra-to-scylla-migration-process.html">Migration Process from Cassandra to Scylla</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../using-scylla/cassandra-compatibility.html">Scylla and Apache Cassandra Compatibility</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../using-scylla/mig-tool-review.html">Migration Tools Overview</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../using-scylla/integrations/index.html">Integration Solutions</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label for="toctree-checkbox-6"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../using-scylla/integrations/integration-spark.html">Integrate Scylla with Spark</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../using-scylla/integrations/integration-kairos.html">Integrate Scylla with KairosDB</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../using-scylla/integrations/integration-presto.html">Integrate Scylla with Presto</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../using-scylla/integrations/integration-elasticsearch.html">Integrate Scylla with Elasticsearch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../using-scylla/integrations/integration-k8.html">Integrate Scylla with Kubernetes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../using-scylla/integrations/integration-janus.html">Integrate Scylla with the JanusGraph Graph Data System</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../using-scylla/integrations/integration-datadog.html">Integrate Scylla with DataDog</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../using-scylla/integrations/integration-kafka.html">Integrate Scylla with Kafka</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../using-scylla/integrations/integration-iota.html">Integrate Scylla with IOTA Chronicle</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../using-scylla/integrations/integration-spring.html">Integrate Scylla with Spring</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../using-scylla/integrations/sink-kafka-connector.html">Shard-Aware Kafka Connector for Scylla</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../using-scylla/integrations/integration-ansible.html">Install Scylla with Ansible</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../using-scylla/integrations/integration-databricks.html">Integrate Scylla with Databricks</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../getting-started/tutorials.html">Tutorials</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../../../operating-scylla/index.html">Scylla for Administrators</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label for="toctree-checkbox-7"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../operating-scylla/admin.html">Administration Guide</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../operating-scylla/procedures/index.html">Procedures</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label for="toctree-checkbox-8"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../operating-scylla/procedures/cluster-management/index.html">Cluster Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../operating-scylla/procedures/backup-restore/index.html">Backup &amp; Restore</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../operating-scylla/procedures/config-change/index.html">Change Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../operating-scylla/procedures/maintenance/index.html">Maintenance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../operating-scylla/procedures/tips/index.html">Best Practices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../operating-scylla/benchmarking-scylla.html">Benchmarking Scylla</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../operating-scylla/procedures/cassandra-to-scylla-migration-process.html">Migrate from Cassandra to Scylla</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../getting-started/install-scylla/disable-housekeeping.html">Disable Housekeeping</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../operating-scylla/security/index.html">Security</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label for="toctree-checkbox-9"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../operating-scylla/security/security-checklist.html">Scylla Security Checklist</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../operating-scylla/security/authentication.html">Enable Authentication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../operating-scylla/security/runtime-authentication.html">Enable and Disable Authentication Without Downtime</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../operating-scylla/security/gen-cqlsh-file.html">Generate a cqlshrc File</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../troubleshooting/password-reset.html">Reset Authenticator Password</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../operating-scylla/security/enable-authorization.html">Enable Authorization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../operating-scylla/security/authorization.html">Grant Authorization CQL Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../operating-scylla/security/rbac-usecase.html">Role Based Access Control (RBAC)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../operating-scylla/security/auditing.html">Scylla Auditing Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../operating-scylla/security/client-node-encryption.html">Encryption: Data in Transit Client to Node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../operating-scylla/security/node-node-encryption.html">Encryption: Data in Transit Node to Node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../operating-scylla/security/generate-certificate.html">Generating a self-signed Certificate Chain Using openssl</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../operating-scylla/security/encryption-at-rest.html">Encryption at Rest</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../operating-scylla/security/ldap-authentication.html">LDAP Authentication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../operating-scylla/security/ldap-authorization.html">LDAP Authorization (Role Management)</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../operating-scylla/admin-tools/index.html">Admin Tools</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label for="toctree-checkbox-10"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../operating-scylla/nodetool.html">Nodetool Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../cql/cqlsh.html">CQLSh</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../operating-scylla/rest.html">REST</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../using-scylla/tracing.html">Tracing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../operating-scylla/admin-tools/scylla-sstable.html">scylla-sstable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../operating-scylla/admin-tools/scylla-types.html">scylla-types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../operating-scylla/admin-tools/sstableloader.html">SSTableLoader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../operating-scylla/admin-tools/cassandra-stress.html">cassandra-stress</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../operating-scylla/admin-tools/sstabledump.html">SSTabledump</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../operating-scylla/admin-tools/sstable2json.html">SSTable2json</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../operating-scylla/admin-tools/sstable-index.html">SSTable Index</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../getting-started/logging.html">Scylla Logs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../operating-scylla/admin-tools/perftune.html">Seastar Perftune</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../operating-scylla/admin-tools/virtual-tables.html">Virtual Tables</a></li>
</ul>
</li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="../../../operating-scylla/manager/index.html">Scylla Manager</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/><label for="toctree-checkbox-11"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul class="current">
<li class="toctree-l3"><a class="reference external" href="https://manager.docs.scylladb.com">Scylla Manager Docs</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../index.html">Upgrade Scylla Manager</a></li>
<li class="toctree-l3"><a class="reference external" href="https://monitoring.docs.scylladb.com/stable/reference/matrix.html">Monitoring Support Matrix</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../operating-scylla/monitoring/index.html">Scylla Monitoring Stack</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/><label for="toctree-checkbox-12"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference external" href="https://scylladb.github.io/scylla-monitoring">Latest Version</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../upgrade-monitor/index.html">Upgrade Scylla Monitoring Stack</a></li>
<li class="toctree-l3"><a class="reference external" href="https://monitoring.docs.scylladb.com/stable/reference/matrix.html">Monitoring Support Matrix</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../operating-scylla/scylla-operator/index.html">Scylla Operator</a></li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="../../index.html">Upgrade Procedures</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/><label for="toctree-checkbox-13"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../upgrade-enterprise/index.html">Scylla Enterprise</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../upgrade-opensource/index.html">Scylla Open Source</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../upgrade-to-enterprise/index.html">Scylla Open Source to Scylla Enterprise</a></li>
<li class="toctree-l3 current current-page"><a class="reference internal" href="../index.html">Scylla Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../upgrade-monitor/index.html">Scylla Monitoring</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ami-upgrade.html">Scylla AMI</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../operating-scylla/system-configuration/index.html">System Configuration</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/><label for="toctree-checkbox-14"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../getting-started/system-configuration.html">System Configuration Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../operating-scylla/admin.html">scylla.yaml</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../operating-scylla/system-configuration/snitch.html">Scylla Snitches</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../operating-scylla/benchmarking-scylla.html">Benchmarking Scylla</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../using-scylla/index.html">Scylla for Developers</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/><label for="toctree-checkbox-15"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../using-scylla/learn.html">Learn To Use Scylla</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/><label for="toctree-checkbox-16"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference external" href="https://university.scylladb.com/">Scylla University</a></li>
<li class="toctree-l3"><a class="reference external" href="https://university.scylladb.com/available-courses/">Course catalog</a></li>
<li class="toctree-l3"><a class="reference external" href="https://university.scylladb.com/courses/scylla-essentials-overview/">Scylla Essentials</a></li>
<li class="toctree-l3"><a class="reference external" href="https://university.scylladb.com/courses/data-modeling/lessons/basic-data-modeling-2/">Basic Data Modeling</a></li>
<li class="toctree-l3"><a class="reference external" href="https://university.scylladb.com/courses/data-modeling/lessons/advanced-data-modeling/">Advanced Data Modeling</a></li>
<li class="toctree-l3"><a class="reference external" href="https://university.scylladb.com/courses/the-mutant-monitoring-system-training-course/">MMS - Learn by Example</a></li>
<li class="toctree-l3"><a class="reference external" href="https://scylladb.github.io/care-pet/master/">Care-Pet an IoT Use Case and Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../using-scylla/alternator/index.html">Scylla Alternator</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../using-scylla/features.html">Scylla Features</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" type="checkbox"/><label for="toctree-checkbox-17"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../using-scylla/features-open-source.html">Scylla Open Source Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../using-scylla/features-ent.html">Scylla Enterprise Features</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../using-scylla/drivers/index.html">Scylla Drivers</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" type="checkbox"/><label for="toctree-checkbox-18"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../using-scylla/drivers/cql-drivers/index.html">Scylla CQL Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../using-scylla/drivers/dynamo-drivers/index.html">Scylla DynamoDB Drivers</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../cql/index.html">CQL Reference</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" type="checkbox"/><label for="toctree-checkbox-19"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../cql/cqlsh.html">CQLSh: the CQL shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cql/appendices.html">Appendices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cql/compaction.html">Compaction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cql/consistency.html">Consistency Levels</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cql/ddl.html">Data Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cql/dml.html">Data Manipulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cql/types.html">Data Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cql/definitions.html">Definitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cql/secondary-indexes.html">Global Secondary Indexes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cql/secondary-indexes.html#additional-information">Additional Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cql/time-to-live.html">Expiring Data with Time to Live (TTL)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cql/time-to-live.html#additional-information">Additional Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cql/functions.html">Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cql/json.html">JSON Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cql/mv.html">Materialized Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cql/non-reserved-keywords.html">Non-Reserved CQL Keywords</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cql/reserved-keywords.html">Reserved CQL Keywords</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cql/cql-extensions.html">ScyllaDB CQL Extensions</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../architecture/index.html">Scylla Architecture</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" type="checkbox"/><label for="toctree-checkbox-20"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../architecture/ringarchitecture/index.html">Scylla Ring Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../architecture/architecture-fault-tolerance.html">Scylla Fault Tolerance</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../architecture/console-CL-full-demo.html">Consistency Level Console Demo</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../architecture/anti-entropy/index.html">Scylla Anti-Entropy</a><input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" type="checkbox"/><label for="toctree-checkbox-21"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../architecture/anti-entropy/hinted-handoff.html">Scylla Hinted Handoff</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../architecture/anti-entropy/read-repair.html">Scylla Read Repair</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../operating-scylla/procedures/maintenance/repair.html">Scylla Repair</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../architecture/sstable/index.html">SSTable</a><input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" type="checkbox"/><label for="toctree-checkbox-22"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../architecture/sstable/sstable2/index.html">Scylla SSTable - 2.x</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../architecture/sstable/sstable3/index.html">Scylla SSTable - 3.x</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../architecture/compaction/compaction-strategies.html">Compaction Strategies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../architecture/raft.html">Raft Consensus Algorithm in ScyllaDB</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../troubleshooting/index.html">Troubleshooting Scylla</a><input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" type="checkbox"/><label for="toctree-checkbox-23"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../troubleshooting/support/index.html">Errors and Support</a><input class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" type="checkbox"/><label for="toctree-checkbox-24"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../troubleshooting/report-scylla-problem.html">Report a Scylla problem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../troubleshooting/error-messages/index.html">Error Messages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../troubleshooting/log-level.html">Change Log Level</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../troubleshooting/startup/index.html">Scylla Startup</a><input class="toctree-checkbox" id="toctree-checkbox-25" name="toctree-checkbox-25" type="checkbox"/><label for="toctree-checkbox-25"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../troubleshooting/change-ownership.html">Ownership Problems</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../troubleshooting/scylla-wont-start.html">Scylla will not Start</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../troubleshooting/python-error-no-module-named-yaml.html">Scylla Python Script broken</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../troubleshooting/cluster/index.html">Cluster and Node</a><input class="toctree-checkbox" id="toctree-checkbox-26" name="toctree-checkbox-26" type="checkbox"/><label for="toctree-checkbox-26"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../troubleshooting/failed-decommission.html">Failed Decommission Problem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../troubleshooting/timeouts.html">Cluster Timeouts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../troubleshooting/node-joined-without-any-data.html">Node Joined With No Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../troubleshooting/nodetool-memory-read-timeout.html">SocketTimeoutException</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../troubleshooting/nodetool-nullpointerexception.html">NullPointerException</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../troubleshooting/modeling/index.html">Data Modeling</a><input class="toctree-checkbox" id="toctree-checkbox-27" name="toctree-checkbox-27" type="checkbox"/><label for="toctree-checkbox-27"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../troubleshooting/large-partition-table.html">Scylla Large Partitions Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../troubleshooting/large-rows-large-cells-tables.html">Scylla Large Rows and Cells Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../troubleshooting/debugging-large-partition.html">Large Partitions Hunting</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../troubleshooting/storage/index.html">Data Storage and SSTables</a><input class="toctree-checkbox" id="toctree-checkbox-28" name="toctree-checkbox-28" type="checkbox"/><label for="toctree-checkbox-28"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../troubleshooting/space-up.html">Space Utilization Increasing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../troubleshooting/drop-table-space-up.html">Disk Space is not Reclaimed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../troubleshooting/sstable-corruption.html">SSTable Corruption Problem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../troubleshooting/pointless-compactions.html">Pointless Compactions</a></li>
<li class="toctree-l3"><a class="reference external" href="https://monitoring.docs.scylladb.com/stable/use-monitoring/advisor/heavyCompaction.html">Limiting Compaction</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../troubleshooting/CQL/index.html">CQL</a><input class="toctree-checkbox" id="toctree-checkbox-29" name="toctree-checkbox-29" type="checkbox"/><label for="toctree-checkbox-29"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../troubleshooting/time-zone.html">Time Range Query Fails</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../troubleshooting/copy-from-failed.html">COPY FROM Fails</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../troubleshooting/clients-table.html">CQL Connection Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../troubleshooting/reverse-queries.html">Reverse queries fail</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../troubleshooting/monitor/index.html">Scylla Monitor and Manager</a><input class="toctree-checkbox" id="toctree-checkbox-30" name="toctree-checkbox-30" type="checkbox"/><label for="toctree-checkbox-30"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../troubleshooting/manager-monitoring-integration.html">Manager and Monitoring integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../troubleshooting/reverse-dns-sshd.html">Manager lists healthy nodes as down</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../kb/index.html">Knowledge Base</a><input class="toctree-checkbox" id="toctree-checkbox-31" name="toctree-checkbox-31" type="checkbox"/><label for="toctree-checkbox-31"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../kb/cdc-experimental-upgrade.html">Upgrading from experimental CDC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kb/compaction.html">Compaction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kb/count-all-rows.html">Counting all rows in a table is slow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kb/cqlsh-more.html">CQL Query Does Not Display Entire Result Set</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kb/cqlsh-results.html">When CQLSh query returns partial results with followed by “More”</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kb/custom-user.html">Run Scylla and supporting services as a custom user:group</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kb/decode-stack-trace.html">Decoding Stack Traces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kb/disk-utilization.html">Snapshots and Disk Utilization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kb/dpdk-hardware.html">DPDK mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kb/flamegraph.html">Debug your database with Flame Graphs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kb/gc-grace-seconds.html">How to Change gc_grace_seconds for a Table</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kb/gossip.html">Gossip in Scylla</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kb/increase-permission-cache.html">Increase Permission Cache to Avoid Non-paged Queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kb/lwt-differences.html">How does Scylla LWT Differ from Apache Cassandra ?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kb/map-cpu.html">Map CPUs to Scylla Shards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kb/memory-usage.html">Scylla Memory Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kb/ntp.html">NTP Configuration for Scylla</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kb/posix.html">POSIX networking for Scylla</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kb/quiz-administrators.html">Scylla consistency quiz for administrators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kb/raid-device.html">Recreate RAID devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kb/rf-increase.html">How to Safely Increase the Replication Factor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kb/scylla-and-spark-integration.html">Scylla and Spark integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kb/scylla-limits-systemd.html">Increase Scylla resource limits over systemd</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kb/seed-nodes.html">Scylla Seed Nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kb/set-up-swap.html">How to Set up a Swap Space</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kb/snapshots.html">Scylla Snapshots</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kb/static-columns.html">Scylla payload sent duplicated static columns</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kb/stop-local-repair.html">Stopping a local repair</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kb/system-limits.html">System Limits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kb/tombstones-flush.html">How to flush old tombstones from a table</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kb/ttl-facts.html">Time to Live (TTL) and Compaction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kb/unresponsive-nodes.html">Scylla Nodes are Unresponsive</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kb/update-pk.html">Update a Primary Key</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kb/use-perf.html">Using the perf utility with Scylla</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kb/yaml-address.html">Configure Scylla Networking with Multiple NIC/IP Combinations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://university.scylladb.com/">Scylla University</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../faq.html">Scylla FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contribute.html">Contribute to Scylla</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Glossary</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../alternator/alternator.html">Alternator: DynamoDB API in Scylla</a><input class="toctree-checkbox" id="toctree-checkbox-32" name="toctree-checkbox-32" type="checkbox"/><label for="toctree-checkbox-32"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../alternator/getting-started.html">Getting Started With ScyllaDB Alternator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../alternator/compatibility.html">Scylla Alternator for DynamoDB users</a></li>
</ul>
</li>
</ul>

        </div>
    </div>
</div>
                    
                
            </div>
            
                <div class="sidebar-right large-order-3">
                    <div class="secondary-side-nav custom-scroll-bar">
    
    <ul class="contribute">
        <li class="contribute__item">
            <a href="https://github.com/scylladb/scylla/issues/new?title=Issue in page Scylla Manager Upgrade - Scylla Manager 2.x.a to 2.y.b&&body=I%20would%20like%20to%20report%20an%20issue%20in%20page%20https://docs.scylladb.com/master/upgrade/upgrade-manager/upgrade-guide-from-2.x.a-to-2.y.b/upgrade-2.x.a-to-2.y.b%0A%0A%23%23%23%20Problem%0A%0A%23%23%23%20%20Suggest%20a%20fix"
                target="_blank">
                <i class="icon fab fa-github" aria-hidden="true"></i>Create an issue
            </a>
        </li>
        
            <li class="contribute__item">
                
                
                    
                        
                    
                
                <a href="https://github.com/scylladb/scylla/edit/master/docs/upgrade/upgrade-manager/upgrade-guide-from-2.x.a-to-2.y.b/upgrade-2.x.a-to-2.y.b.rst"
                    target="_blank">
                    <i class="icon fa fa-edit" aria-hidden="true"></i>Edit this page
                </a>
            </li>
        
    </ul>

    
        <div class="secondary-side-nav__content">
            <p class="topic-title">On this page</p>
            <ul>
<li><a class="reference internal" href="#">Scylla Manager Upgrade - Scylla Manager 2.x.a to 2.y.b</a><ul>
<li><a class="reference internal" href="#applicable-versions">Applicable versions</a></li>
<li><a class="reference internal" href="#upgrade-procedure">Upgrade Procedure</a></li>
<li><a class="reference internal" href="#upgrade-steps">Upgrade steps</a><ul>
<li><a class="reference internal" href="#stop-all-scylla-manager-tasks-or-wait-for-them-to-finish">Stop all Scylla Manager tasks (or wait for them to finish)</a></li>
<li><a class="reference internal" href="#stop-the-scylla-manager-server-2-x-a">Stop the Scylla Manager Server 2.x.a</a></li>
<li><a class="reference internal" href="#stop-the-scylla-manager-agent-2-x-a-on-all-nodes">Stop the Scylla Manager Agent 2.x.a on all nodes</a></li>
<li><a class="reference internal" href="#upgrade-the-scylla-manager-server-and-client-to-2-y-b">Upgrade the Scylla Manager Server and Client to 2.y.b</a></li>
<li><a class="reference internal" href="#upgrade-the-scylla-manager-agent-to-2-y-b-on-all-nodes">Upgrade the Scylla Manager Agent to 2.y.b on all nodes</a></li>
<li><a class="reference internal" href="#run-scyllamgr-agent-setup-script-on-all-nodes">Run <cite>scyllamgr_agent_setup</cite> script on all nodes</a></li>
<li><a class="reference internal" href="#reconcile-configuration-files">Reconcile configuration files</a></li>
<li><a class="reference internal" href="#start-the-scylla-manager-agent-2-y-b-on-all-nodes">Start the Scylla Manager Agent 2.y.b on all nodes</a></li>
<li><a class="reference internal" href="#start-the-scylla-manager-server-2-y-b">Start the Scylla Manager Server 2.y.b</a></li>
<li><a class="reference internal" href="#validate-status-of-the-cluster">Validate status of the cluster</a></li>
</ul>
</li>
<li><a class="reference internal" href="#rollback-procedure">Rollback Procedure</a></li>
<li><a class="reference internal" href="#rollback-steps">Rollback steps</a><ul>
<li><a class="reference internal" href="#id1">Stop all Scylla Manager tasks (or wait for them to finish)</a></li>
<li><a class="reference internal" href="#stop-the-scylla-manager-server-2-y-b">Stop the Scylla Manager Server 2.y.b</a></li>
<li><a class="reference internal" href="#stop-the-scylla-manager-agent-2-y-b-on-all-nodes">Stop the Scylla Manager Agent 2.y.b on all nodes</a></li>
<li><a class="reference internal" href="#downgrade-the-scylla-manager-server-and-client-to-2-x-a">Downgrade the Scylla Manager Server and Client to 2.x.a</a></li>
<li><a class="reference internal" href="#downgrade-the-scylla-manager-agent-to-2-x-a-on-all-nodes">Downgrade the Scylla Manager Agent to 2.x.a on all nodes</a></li>
<li><a class="reference internal" href="#revert-to-the-old-configuration">Revert to the old configuration</a></li>
<li><a class="reference internal" href="#start-the-scylla-manager-agent-2-x-a-on-all-nodes">Start the Scylla Manager Agent 2.x.a on all nodes</a></li>
<li><a class="reference internal" href="#start-the-scylla-manager-server-2-x-a">Start the Scylla Manager Server 2.x.a</a></li>
<li><a class="reference internal" href="#id2">Validate status of the cluster</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
    
</div>
                </div>
            
        </section>

        <footer class="footer">
    <div class="footer-group">
        <div class="footer-top">
            <a class="footer-logo" href="https://www.scylladb.com">
                <img src="../../../_static/img/logo-scylla-horizontal-RGB.svg" alt="Logo" />
            </a>
            <div class="footer-links">
                <a class="footer-links__link" href="https://docs.scylladb.com/">Docs</a>
                <a class="footer-links__link" href="https://www.scylladb.com/company/contact-us/">Contact Us</a>
                <a class="footer-links__link" href="https://www.scylladb.com/company/">About Us</a>
            </div>
            <div class="footer-actions">
                <a class="footer-actions__link" href="https://groups.google.com/g/scylladb-users" target="_blank">
                    <span data-tooltip tabindex="1" title="User mailing list" data-position="bottom">
                        <img src="../../../_static/img/icons/icon-mail-list.svg" alt="Mail List Icon" />
                    </span>
                </a>
                <a class="footer-actions__link" href="http://slack.scylladb.com/" target="_blank">
                    <span data-tooltip tabindex="1" title="User Slack channel" data-position="bottom">
                        <img src="../../../_static/img/icons/icon-slack.svg" alt="Slack Icon" />
                    </span>
                </a>
            </div>
        </div>

        <div class="footer-bottom">
            
                <div class="footer-bottom__copyright">
                    
                        
                            &#169; 2022, ScyllaDB. All rights reserved.
                        
                    
                </div>
            
            
                <div class="footer-bottom__last-updated">
                    
                        Last updated on 22 Jul 2022.
                    
                </div>
            
            <div class="footer-bottom__version">
                Powered by
                <a href="http://sphinx-doc.org/">Sphinx 4.3.2</a> &amp;
                <a href="https://sphinx-theme.scylladb.com/">ScyllaDB Theme 1.2.2</a>
            </div>
        </div>
    </div>
</footer>

        <noscript>
            <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T8P2JP" height="0" width="0"
                style="display: none; visibility: hidden"></iframe>
        </noscript>
    </body>

</html>